!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.i18nextXHRBackend=e()}(this,function(){"use strict";function t(t){return a.call(s.call(arguments,1),function(e){if(e)for(var o in e)void 0===t[o]&&(t[o]=e[o])}),t}function e(t,e){if(e&&"object"===(void 0===e?"undefined":l(e))){var o="",n=encodeURIComponent;for(var i in e)o+="&"+n(i)+"="+n(e[i]);if(!o)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+o.slice(1)}return t}function o(t,o,n,i,r){i&&"object"===(void 0===i?"undefined":l(i))&&(r||(i._t=new Date),i=e("",i).slice(1)),o.queryStringParams&&(t=e(t,o.queryStringParams));try{var a;a=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0"),a.open(i?"POST":"GET",t,1),o.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!o.withCredentials,i&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var s=o.customHeaders;if(s)for(var u in s)a.setRequestHeader(u,s[u]);a.onreadystatechange=function(){a.readyState>3&&n&&n(a.responseText,a)},a.send(i)}catch(t){console&&console.log(t)}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:o,preloaded:{}}}var r=[],a=r.forEach,s=r.slice,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),f=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this.init(t,o),this.type="backend"}return c(e,[{key:"init",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=t(o,this.options||{},i())}},{key:"readMulti",value:function(t,e,o){var n=this.options.loadPath;"function"==typeof this.options.loadPath&&(n=this.options.loadPath(t,e));var i=this.services.interpolator.interpolate(n,{lng:t.join("+"),ns:e.join("+")});this.loadUrl(i,o)}},{key:"read",value:function(t,e,o){var n=this.options.loadPath;"function"==typeof this.options.loadPath&&(n=this.options.loadPath([t],[e]));var i=this.services.interpolator.interpolate(n,{lng:t,ns:e});this.loadUrl(i,o)}},{key:"loadUrl",value:function(t,e){var o=this,n=this.options.preloaded[t];n&&"object"===(void 0===n?"undefined":u(n))?e(null,n):this.options.ajax(t,this.options,function(n,i){if(i.status>=500&&i.status<600)return e("failed loading "+t,!0);if(i.status>=400&&i.status<500)return e("failed loading "+t,!1);var r=void 0,a=void 0;try{r=o.options.parse(n,t)}catch(e){a="failed parsing "+t+" to json"}if(a)return e(a,!1);e(null,r)})}},{key:"create",value:function(t,e,o,n){var i=this;"string"==typeof t&&(t=[t]);var r={};r[o]=n||"",t.forEach(function(t){var o=i.services.interpolator.interpolate(i.options.addPath,{lng:t,ns:e});i.options.ajax(o,i.options,function(t,e){},r)})}}]),e}();return f.type="backend",f});
